<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">/*
 * This file is extend Javascript interface of SmartAuto platform.
 * 
 * 	Reference C++ inteface 
 *  	@see &lt;a href=&quot;http://nutshell.suntec.net/nutshelldevelop/?p=framework/api/QtSystemAPI.git;a=tree;f=include/nqmedia;h=abe9862670ba211fddc7b085dc8de8c35955be3a;hb=HEAD&quot;&gt;NQUsbPlayerApi.h&lt;/a&gt; 
 *  
 *  Referect C++ implement  
 *  	&lt;a href=&quot;http://nutshell.suntec.net/nutshelldevelop/?p=framework/api/QtSystemAPI.git;a=tree;f=nqmedia/usb;h=22a4ed32cf0c6ae7256f85cb17c36ec29b393450;hb=HEAD&quot;&gt;NQUsbPlayerImpl.h, NQUsbPlayerImpl.cpp&lt;/a&gt;
 */

(function(){
	&quot;use strict&quot;;
})();


// @tag nutshell,extJs
// @define nutshell.usbPlayer
// @require nutshell

<span id='nutshell-usbPlayer'>/**
</span> * @class nutshell.usbPlayer
 * 
 * nutshell.usbPlayer
 * @singleton
 */

(function(){

<span id='MEDIATYPE'>        /**
</span>		 * enum  
		 *
		 */
		 MEDIATYPE = {
<span id='MEDIATYPE-property-MEDIATYPE_INVALID'>            MEDIATYPE_INVALID : 0,
</span><span id='MEDIATYPE-property-MEDIATYPE_MP3'>            MEDIATYPE_MP3 : 1, 
</span><span id='MEDIATYPE-property-MEDIATYPE_M4A'>            MEDIATYPE_M4A : 2,
</span><span id='MEDIATYPE-property-MEDIATYPE_FLAC'>            MEDIATYPE_FLAC : 3,
</span><span id='MEDIATYPE-property-MEDIATYPE_OGG'>            MEDIATYPE_OGG : 4,
</span><span id='MEDIATYPE-property-MEDIATYPE_WAV'>            //MEDIATYPE_AAC : ,
</span>            MEDIATYPE_WAV : 5,
<span id='MEDIATYPE-property-MEDIATYPE_MP4'>            MEDIATYPE_MP4 : 6,
</span><span id='MEDIATYPE-property-MEDIATYPE_AVI'>            MEDIATYPE_AVI : 7,
</span><span id='MEDIATYPE-property-MEDIATYPE_MKV'>            MEDIATYPE_MKV : 8,
</span><span id='MEDIATYPE-property-MEDIATYPE_FLV'>            MEDIATYPE_FLV : 9,
</span><span id='MEDIATYPE-property-MEDIATYPE_MPEG'>            MEDIATYPE_MPEG : 10,
</span><span id='MEDIATYPE-property-MEDIATYPE_TS'>            MEDIATYPE_TS : 11,
</span><span id='MEDIATYPE-property-MEDIATYPE_MAX'>            MEDIATYPE_MAX : 12
</span>        };
<span id='PLAYSTATUS'>        /**
</span>		 * enum  
		 *
		 */
		 PLAYSTATUS = {
<span id='PLAYSTATUS-property-PLAYSTATUS_READY'><span id='PLAYSTATUS-property-PLAYSTATUS_INVALID'>            PLAYSTATUS_INVALID : 0,     ///&lt; Invalid status.
</span></span><span id='PLAYSTATUS-property-PLAYSTATUS_STOP'>            PLAYSTATUS_READY : 1,           ///&lt; Load ready status.
</span><span id='PLAYSTATUS-property-PLAYSTATUS_PLAYING'>            PLAYSTATUS_STOP : 2,            ///&lt; Stop status.
</span><span id='PLAYSTATUS-property-PLAYSTATUS_PAUSED'>            PLAYSTATUS_PLAYING : 3,         ///&lt; Playing status.
</span><span id='PLAYSTATUS-property-PLAYSTATUS_FASTFORWARD'>            PLAYSTATUS_PAUSED : 4,          ///&lt; Paused status.
</span><span id='PLAYSTATUS-property-PLAYSTATUS_FASTREWIND'>            PLAYSTATUS_FASTFORWARD : 5,     ///&lt; Fast-Forward status.
</span><span id='PLAYSTATUS-property-PLAYSTATUS_MAX'>            PLAYSTATUS_FASTREWIND : 6,      ///&lt; Fast-Rewind status.
</span>            PLAYSTATUS_MAX : 7
        };
<span id='TRACKINFOVALIDBITMASK'>        /**
</span>		 * enum  TRACKINFOVALIDBITMASK  
		 *
		 */
		 TRACKINFOVALIDBITMASK = {
<span id='TRACKINFOVALIDBITMASK-property-TRACKINFOVALIDBIT_ARTIST'><span id='TRACKINFOVALIDBITMASK-property-TRACKINFOVALIDBIT_TITLE'>            TRACKINFOVALIDBIT_TITLE : 0,    ///&lt; Title.
</span></span><span id='TRACKINFOVALIDBITMASK-property-TRACKINFOVALIDBIT_ALBUM'>            TRACKINFOVALIDBIT_ARTIST : 1,       ///&lt; Artist.
</span><span id='TRACKINFOVALIDBITMASK-property-TRACKINFOVALIDBIT_GENRE'>            TRACKINFOVALIDBIT_ALBUM : 2,        ///&lt; Album.
</span><span id='TRACKINFOVALIDBITMASK-property-TRACKINFOVALIDBIT_ARTWORK'>            TRACKINFOVALIDBIT_GENRE : 3,        ///&lt; Genre.
</span><span id='TRACKINFOVALIDBITMASK-property-TRACKINFOVALIDBIT_MAX'>            TRACKINFOVALIDBIT_ARTWORK : 4,      ///&lt; Artwork.
</span>            TRACKINFOVALIDBIT_MAX : 5
        };
<span id='ASPECTRATIO'>        /**
</span>		 * enum  视频宽高比例
		 *
		 */
		 ASPECTRATIO = {
<span id='ASPECTRATIO-property-ASPECTRATIO_16_9'><span id='ASPECTRATIO-property-ASPECTRATIO_4_3'>            ASPECTRATIO_4_3 : 0,    ///&lt; Set the aspect-ratio as 4*3.
</span></span><span id='ASPECTRATIO-property-ASPECTRATIO_FULLSCREEN'>            ASPECTRATIO_16_9 : 1,       ///&lt; Set the aspect-ratio as 16*9.
</span><span id='ASPECTRATIO-property-ASPECTRATIO_MAX'>            ASPECTRATIO_FULLSCREEN : 2, ///&lt; Set the aspect-ratio as full screen.
</span>            ASPECTRATIO_MAX : 3
        };
<span id='REPEATMODE'>        /**
</span>		 * enum  播放模式。
		 *
		 */
		 REPEATMODE = {
<span id='REPEATMODE-property-REPEATMODE_SINGLE'><span id='REPEATMODE-property-REPEATMODE_NONE'>            REPEATMODE_NONE : 0 ,    ///&lt; Play from the first track to the last track : , and then stop.
</span></span><span id='REPEATMODE-property-REPEATMODE_LIST'>            REPEATMODE_SINGLE : 1,      ///&lt; Repeat the single track.
</span><span id='REPEATMODE-property-REPEATMODE_MAX'>            REPEATMODE_LIST : 2,        ///&lt; Play from the first track to the last track, and then back to play the first track.
</span>            REPEATMODE_MAX : 3
        };
<span id='SHUFFLEMODE'>        /**
</span>		 * enum  
		 *
		 */
		 SHUFFLEMODE = {
<span id='SHUFFLEMODE-property-SHUFFLEMODE_ON'><span id='SHUFFLEMODE-property-SHUFFLEMODE_OFF'>            SHUFFLEMODE_OFF : 0,    ///&lt; Turn off shuffle mode.
</span></span><span id='SHUFFLEMODE-property-SHUFFLEMODE_MAX'>            SHUFFLEMODE_ON : 1,         ///&lt; Turn on shuffle mode.
</span>            SHUFFLEMODE_MAX : 3
        };
        
<span id='TrackProperty'>        /**
</span>         * @class TrackProperty
         */
        function TrackProperty(){
            this.filename = &quot;&quot;;  // 文件全路径。
            this.index = 0;             ///&lt; The index in playlist(start from 1).
            this.totalCount = 0;          ///&lt; The total count in playlist.
            this.isVideo = false;            ///&lt; Audio/Video. @ignore
            this.mediaType = 0;           ///&lt; Defined in enum MEDIATYPE. @ignore
            this.audioTrackCount = 0;     ///@ignore
            this.videoTrackCount = 0;     ///@ignore 
            this.subtitleTrackCount = 0;      ///@ignore
            this.duration = 0;  // 时长。 单位ms
	    this.fileSize = 0;  // 文件大小
        };
<span id='VideoDispArea'>        /**
</span>         * @class VideoDispArea
         * 
         * 	Video使用FB1， UI使用FB0.
         * 
         * //TODO: Default value??
         */
        function VideoDispArea() {
            this.axisLeft = 0;    ///&lt; The pixel distance from the left of screen.
            this.axisTop = 0;     ///&lt; The pixel distance from the top of screen.
            this.dispWidth = 0;   ///&lt; The pixel width of display area.
            this.dispHeight = 0;  ///&lt; The pixel height of display area.
        };
        

<span id='PLAYSPEED'>        /**
</span>		 * enum  PLAYSPEED
		 *
		 */
		 PLAYSPEED = {
<span id='PLAYSPEED-property-PLAYSPEED_X0_5'>            PLAYSPEED_X0_5 : 0,
</span><span id='PLAYSPEED-property-PLAYSPEED_X1'>            PLAYSPEED_X1 : 1,
</span><span id='PLAYSPEED-property-PLAYSPEED_X2'>            PLAYSPEED_X2 : 2,
</span><span id='PLAYSPEED-property-PLAYSPEED_MAX'>            PLAYSPEED_MAX : 3
</span>        };	
	
})();

// @tag nutshell,extJs
// @define nutshell.usbPlayer
// @require nutshell

<span id='nutshell-usbPlayer'>/**
</span> * @class nutshell.usbPlayer
 * 
 * usbPlayer
 * @singleton
 */
(function() {
	
       
<span id='nutshell-usbPlayer'>/**
</span> * @class nutshell.usbPlayer
 * @singleton
 *	
 * interface of Usb Player
 * 
 */
 nutshell.usbPlayer = {
<span id='global-property-ERRORCODE'>		/**
</span>		 * enum  
		 * 
		 * @ignore
		 *
		 */
		ERRORCODE : {
            ERRORCODE_START : 0,
            ERRORCODE_FILE_PARSE_ERROR : 1,
            // TODO: ...
            ERRORCODE_MAX : 2
        },
        
		//callbackbase 
		m_cbMgr : {},		

<span id='nutshell-usbPlayer-property-m_trackInfo'>		/** Information of the current track. */
</span>	    m_trackInfo : {
			titile : '',
			artist : '',
			album : '',
			genre : '',
			commont : '',
			track : '', //trackindex
			year : '',
			fileName : '',
			folderName : ''
		},
		
<span id='nutshell-usbPlayer-property-m_trackProperty'>		/** trace property */
</span>		m_trackProperty : {
			filename : '',  // 文件全路径。
            		index : 0,             ///&lt; The index in playlist(start from 1).
            		totalCount : 0,          ///&lt; The total count in playlist.
            		isVideo : false,            ///&lt; Audio/Video. @ignore
            		mediaType : 0,           ///&lt; Defined in enum MEDIATYPE. @ignore
           		audioTrackCount : 0,     ///@ignore
		    	videoTrackCount : 0,     ///@ignore 
		    	subtitleTrackCount : 0,      ///@ignore
		    	duration : 0,  // 时长。 单位ms
		    	fileSize : 0,  // 文件大小
		},
		
<span id='nutshell-usbPlayer-property-m_playStatus'>		/** {@link PLAYSTATUS}*/
</span>		m_playStatus : PLAYSTATUS.INVALID,
		m_playingSpeed : 1.0,
		m_FFFRSpeed : 1.0,
		m_playingIndex : 1, // ?
		m_playProgress : 0,
		m_repeatMode : -1, //TODO
		m_shuffleMode : -1, //TODO
		m_videoAspectRatio : {},
		m_audioTrackIndex : 0, 
		m_subtitleTrackIndex : 0,
		
<span id='nutshell-usbPlayer-method-registerCallback'>	    /**
</span>	    * Register callback function of usb manager.
	    *		
	    * @param {String} setName Descripte the callback type.
	    * @param {Function} func Callback function.
	    */
	    registerCallback: function(setName, func){
	    	
	    	nutshell.usbPlayer.m_cbMgr.registerMyself(&quot;nutshell.usbPlayer&quot;);
	    	
	    	nutshell.usbPlayer.m_cbMgr.setCustomCallback(setName, func);
	    	
	    },
	    
<span id='nutshell-usbPlayer-method-emitCallback'>	    /**
</span>	    * Emit the callbacks from handler layer.(Usb service)
	    * 
	    * @param {String} setName Descripte the callback type.
	    * @param {Array} arguments array.
	    * 
	    */
	    emitCallback : function(setName, args){
	    	nutshell.usbPlayer.m_cbMgr.handle(setName, args);
	    },
	    
          
        
        ///////////////// request API  ////////////////////////////////

<span id='nutshell-usbPlayer-method-reqNext'>        /**
</span>         * Request to load the next track in the playlist.
         *
         * @param void
         * @return errorCode : 0 - need to wait the signal playingStartNotify()
         */
        reqNext : function() {
        	SendRequestInPage2(&quot;nutshell.usbPlayer.reqNext&quot;);
        },

<span id='nutshell-usbPlayer-method-reqPrevious'>        /**
</span>         * Request to load the previous track in the playlist.
         *
         * @param void
         * @return errorCode : 0 - need to wait the signal playingStartNotify()
         */
        reqPrevious : function() {
        	SendRequestInPage2(&quot;nutshell.usbPlayer.reqPrevious&quot;);
        },

<span id='nutshell-usbPlayer-method-reqRepeatMode'>        /**
</span>         * Request to set repeat mode.
         *
         * @param repeatMode : [IN] repeat mode
         * @return errorCode : 0 - need to wait the signal repeatModeUpdated()
         */
        reqRepeatMode : function(repeatMode) {
        	SendRequestInPage2(&quot;nutshell.usbPlayer.reqRepeatMode&quot;, JSON.stringify({&quot;repeatMode&quot;:repeatMode}));
        },

<span id='nutshell-usbPlayer-method-reqShuffleMode'>        /**
</span>         * Request to set shuffle mode.
         *
         * @param shuffleMode : [IN] shuffle mode
         * @return errorCode : 0 - need to wait the signal shuffleModeUpdated()
         */
        reqShuffleMode : function(shuffleMode) {
        	SendRequestInPage2(&quot;nutshell.usbPlayer.reqShuffleMode&quot;, JSON.stringify({&quot;shuffleMode&quot;:shuffleMode}));
        },


<span id='nutshell-usbPlayer-method-reqPlayPause'>        /**
</span>         * Request to play/pause state. (play -&gt; pause -&gt; play -&gt; pause ...)
         *
         * @param void
         * @return errorCode : 0 - need to wait the signal playingStatusUpdated()
         */
        reqPlayPause : function() {
        	SendRequestInPage2(&quot;nutshell.usbPlayer.reqPlayPause&quot;);
        },

<span id='nutshell-usbPlayer-method-reqStop'>        /**
</span>         * Request to stop play.
         *
         * @param void
         * @return errorCode : 0 - need to wait the signal playingStatusUpdated()
         */
        reqStop : function() {
        	SendRequestInPage2(&quot;nutshell.usbPlayer.reqStop&quot;);
        },

<span id='nutshell-usbPlayer-method-reqSeek'>        /**
</span>         * Request to seek to specified time.
         *
         * @param targetTime : [IN] specified time (in millisecond)
         * @return errorCode
         */
        reqSeek : function(targetTime) {
        	SendRequestInPage2(&quot;nutshell.usbPlayer.reqSeek&quot;, JSON.stringify({&quot;targetTime&quot;:targetTime}));
        },

<span id='nutshell-usbPlayer-method-reqFastForward'>        /**
</span>         * Request to set the speed of player.
         * @note Call reqResume() to back to normal playing state.
         *
         * @param playSpeed : [IN] specified speed ( value range (1,64] )
         * @return errorCode : 0 - need to wait the signal playingStatusUpdated() &amp; FFFRSpeedUpdated()
         */
        reqFastForward : function(playSpeed) {
        	SendRequestInPage2(&quot;nutshell.usbPlayer.reqFastForward&quot;, JSON.stringify({&quot;playSpeed&quot;:playSpeed}));
        },

<span id='nutshell-usbPlayer-method-reqFastRewind'>        /**
</span>         * Request to set the speed of player.
         * @note Call reqResume() to back to normal playing state.
         *
         * @param playSpeed : [IN] specified speed ( value range [-64,-1) )
         * @return errorCode : 0 - need to wait the signal playingStatusUpdated() &amp; FFFRSpeedUpdated()
         */
        reqFastRewind : function(playSpeed) {
        	SendRequestInPage2(&quot;nutshell.usbPlayer.reqFastRewind&quot;, JSON.stringify({&quot;playSpeed&quot;:playSpeed}));
        },

<span id='nutshell-usbPlayer-method-reqStopFFFR'>        /**
</span>         * Request to stop the status of FastForward or FastRewind.
         *
         * @return errorCode : 0 - need to wait the signal playingStatusUpdated()
         */
        reqStopFFFR : function() {
        	SendRequestInPage2(&quot;nutshell.usbPlayer.reqStopFFFR&quot;);
        },

<span id='nutshell-usbPlayer-method-reqSetPlaySpeed'>        /**
</span>         * Request to change the play speed.
         *
         * @param playSpeed : [IN] specified speed (defined in enum PLAYSPEED)
         * @return errorCode : 0 - need to wait the signal playingSpeedUpdated()
         */
        reqSetPlaySpeed : function(playSpeed) {
        	SendRequestInPage2(&quot;nutshell.usbPlayer.reqSetPlaySpeed&quot;, JSON.stringify({&quot;playSpeed&quot;:playSpeed}));
        },

<span id='nutshell-usbPlayer-method-reqAudioChange'>        /**
</span>         * Request to change the audio track.
         *
         * @param audioIndex : [IN] specified index of audio track
         * @return errorCode : 0 - need to wait the signal audioTrackChanged()
         */
        reqAudioChange : function(audioIndex) {
        	SendRequestInPage2(&quot;nutshell.usbPlayer.reqAudioChange&quot;, JSON.stringify({&quot;audioIndex&quot;:audioIndex}));
        },

<span id='nutshell-usbPlayer-method-reqSubtitleChange'>        /**
</span>         * Request to change the subtitle track.
         *
         * @param subtitleIndex : [IN] specified index of subtitle track
         * @return errorCode : 0 - need to wait the signal subtitleTrackChanged()
         */
        reqSubtitleChange : function(subtitleIndex) {
        	SendRequestInPage2(&quot;nutshell.usbPlayer.reqSubtitleChange&quot;, JSON.stringify({&quot;subtitleIndex&quot;:subtitleIndex}));
        },


<span id='nutshell-usbPlayer-method-reqSetAspectRatio'>        /**
</span>         * Request to change the aspect-ratio of image.
         *
         * @param aspectRatio : [IN] specified aspect-ratio
         * @return errorCode : 0 - need to wait the signal aspectRatioChanged()
         */
        reqSetAspectRatio : function(aspectRatio) {
        	SendRequestInPage2(&quot;nutshell.usbPlayer.reqSetAspectRatio&quot;, JSON.stringify({&quot;aspectRatio&quot;:aspectRatio}));
        },

<span id='nutshell-usbPlayer-method-reqSetDispArea'>        /**
</span>         * Request to change the display area of image.
         *
         * @param dispRect : [IN] specified display area {@link VideoDispArea}
         * @return errorCode : 0 - need to wait the signal dispAreaChanged()
         */
        reqSetDispArea : function(dispRect) {
        	SendRequestInPage2(&quot;nutshell.usbPlayer.reqSetDispArea&quot;);
        },

<span id='nutshell-usbPlayer-method-reqRepeatModeCircleChange'>        /**
</span>         * Request to set repeat mode circle change.
         *
         * @return errorCode : 0 - need to wait the signal repeatModeUpdated()
         */
        reqRepeatModeCircleChange : function() {
        	SendRequestInPage2(&quot;nutshell.usbPlayer.reqRepeatModeCircleChange&quot;);
        },

<span id='nutshell-usbPlayer-method-reqShuffleModeCircleChange'>        /**
</span>         * Request to set shuffle mode circle change.
         *
         * @return errorCode : 0 - need to wait the signal shuffleModeUpdated()
         */
        reqShuffleModeCircleChange : function() {
        	SendRequestInPage2(&quot;nutshell.usbPlayer.reqShuffleModeCircleChange&quot;);
        },        
        
        ///////////////// local data API  ////////////////////////////////

<span id='nutshell-usbPlayer-method-getPlayListCount'>		/**
</span>         * Get the item count in current playlist.
         *
         * @param value : [OUT] the item count
         * @return errorCode
         */
        getPlayListCount : function(value){
        	return nutshell.usbPlayer.m_trackProperty.totalCount;
        },

<span id='nutshell-usbPlayer-method-getPlayingIndex'>        /**
</span>         * Get the index of current playing item in playlist.
         *
         * @param value : [OUT] the index of current playing item
         * @return errorCode
         */
        getPlayingIndex : function(value){
        	return nutshell.usbPlayer.m_trackProperty.index;
        },

<span id='nutshell-usbPlayer-method-getRepeatMode'>        /**
</span>         * Get the repeat mode state.
         *
         * @param value : [OUT] the repeat mode state (defined in enum REPEATMODE)
         * @return errorCode
         */
        getRepeatMode : function(value){
        	return nutshell.usbPlayer.m_repeatMode;
        },

<span id='nutshell-usbPlayer-method-getShuffleMode'>        /**
</span>         * Get the shuffle mode state.
         *
         * @param value : [OUT] the shuffle mode state (defined in enum SHUFFLEMODE)
         * @return errorCode
         */
        getShuffleMode : function(value){
        	return nutshell.usbPlayer.m_shuffleMode;
        },


<span id='nutshell-usbPlayer-method-getPlayingStatus'>        /**
</span>         * Get the player state.
         *
         * @param value : [OUT] the player state (defined in enum PLAYSTATUS)
         * @return errorCode
         */
        getPlayingStatus : function(value){
        	return nutshell.usbPlayer.m_playStatus;
        },

<span id='nutshell-usbPlayer-method-getProgress'>        /**
</span>         * Get the progress of current playing track.
         *
         * @param value : [OUT] the progress (in millisecond)
         * @return errorCode
         */
        getProgress : function(value){
        	return nutshell.usbPlayer.m_playProgress
        },

<span id='nutshell-usbPlayer-method-getDuration'>        /**
</span>         * Get the duration of current playing track.
         *
         * @param value : [OUT] the duration (in millisecond)
         * @return errorCode
         */
        getDuration : function(value){
        	return nutshell.usbPlayer.m_trackProperty.duration;
        },

<span id='nutshell-usbPlayer-method-getFFFRSpeed'>        /**
</span>         * Get the speed of FF/FR.
         *
         * @param value : [OUT] the speed
         * @return errorCode
         */
        getFFFRSpeed : function(value){
        	return nutshell.usbPlayer.m_FFFRSpeed;
        },

<span id='nutshell-usbPlayer-method-getPlaySpeed'>        /**
</span>         * Get the speed of player.
         *
         * @param value : [OUT] the speed  : function(defined in enum PLAYSPEED)
         * @return errorCode
         */
        getPlaySpeed : function(value){},


<span id='nutshell-usbPlayer-method-getTrackProperty'>        /**
</span>         * Get the track property of current playing track.
         *
         * @param value : [OUT] the track property.
         * @return errorCode
         */
        getTrackProperty : function(value){
        	return nutshell.usbPlayer.m_trackProperty;
        },

<span id='nutshell-usbPlayer-method-getTitle'>        /**
</span>         * Get the title of current audio track.
         * 
         * Audio相关的Title。 歌曲名。
         *
         * @param value : [OUT] the title string (in UTF-8)
         * @return errorCode
         */
        getTitle : function(value){
        	return nutshell.usbPlayer.m_trackInfo.title;
        },

<span id='nutshell-usbPlayer-method-getArtist'>        /**
</span>         * Get the artist of current audio track.
         *
         * @param value : [OUT] the artist string (in UTF-8)
         * @return errorCode
         */
        getArtist : function(value){
        	return nutshell.usbPlayer.m_trackInfo.artist;
        },

<span id='nutshell-usbPlayer-method-getAlbum'>        /**
</span>         * Get the album of current audio track.
         *
         * @param value : [OUT] the album string (in UTF-8)
         * @return errorCode
         */
        getAlbum : function(value){
        	return nutshell.usbPlayer.m_trackInfo.album;
        },

<span id='nutshell-usbPlayer-method-getGenre'>        /**
</span>         * Get the genre of current audio track.
         *
         * @param value : [OUT] the genre string (in UTF-8)
         * @return errorCode
         */
        getGenre : function(value){
        	return nutshell.usbPlayer.m_trackInfo.genre;
        },

<span id='nutshell-usbPlayer-method-getCommont'>        /**
</span>         * Get the commont of current audio track.
         *
         * @param value : [OUT] the commont string (in UTF-8)
         * @return errorCode
         */
        getCommont : function(value){
        	return nutshell.usbPlayer.m_trackInfo.commont;
        },

<span id='nutshell-usbPlayer-method-getTrackIndex'>        /**
</span>         * Get the trackindex of current audio track.
         *
         * @param value : [OUT] the trackindex string (in UTF-8)
         * @return errorCode
         */
        getTrackIndex : function(value){
        	return nutshell.usbPlayer.m_trackInfo.track;
        },

<span id='nutshell-usbPlayer-method-getYear'>        /**
</span>         * Get the year of current audio track.
         *
         * @param value : [OUT] the year string (in UTF-8)
         * @return errorCode
         */
        getYear : function(value){
        	return nutshell.usbPlayer.m_trackInfo.year;
        },

<span id='nutshell-usbPlayer-method-getFileName'>        /**
</span>         * Get the filename of current audio track.
         *
         * @param value : [OUT] the year string (in UTF-8)
         * @return errorCode
         */
        getFileName : function(value){
        	return nutshell.usbPlayer.m_trackInfo.fileName;
        },

<span id='nutshell-usbPlayer-method-getFolderName'>        /**
</span>         * Get the foldername of current audio track.
         *
         * @param value : [OUT] the year string (in UTF-8)
         * @return errorCode
         */
        getFolderName : function(value){
        	return nutshell.usbPlayer.m_trackInfo.folderName;
        },

<span id='global-method-getArtWork'>        /**
</span>         * Get the artwork of current audio track.
         * 
         * 封面图片。图片文件的字节流。
         * @ignore
         *
         * @param value : [OUT] the artwork
         * @return errorCode
         */
        getArtWork : function(value){
        	//TODO: image stream?
        	return null;
        },


<span id='nutshell-usbPlayer-method-getAudioCount'>        /**
</span>         * Get the count of audio track.
         *
         * @param value : [OUT] the count
         * @return errorCode
         */
        getAudioCount : function(value){
        	return nutshell.usbPlayer.m_trackProperty.audioTrackCount;
        },

<span id='nutshell-usbPlayer-method-getAudioIndex'>        /**
</span>         * Get the index of current playing audio track.
         *
         * @param value : [OUT] the index
         * @return errorCode
         */
        getAudioIndex : function(value){
        	return nutshell.usbPlayer.m_audioTrackIndex;
        },

<span id='nutshell-usbPlayer-method-getSubtitleCount'>        /**
</span>         * Get the count of subtitle track.
         *
         * @param value : [OUT] the count
         * @return errorCode
         */
        getSubtitleCount : function(value){
        	return nutshell.usbPlayer.m_trackProperty.subtitleTrackCount;
        },

<span id='nutshell-usbPlayer-method-getSubtitleIndex'>        /**
</span>         * Get the index of current playing subtitle track.
         *
         * @param value : [OUT] the index
         * @return errorCode
         */
        getSubtitleIndex : function(value){
        	return nutshell.usbPlayer.m_subtitleTrackIndex;
        },

	
<span id='nutshell-usbPlayer-method-getFileSize'>        /**
</span>         * Get the size of current playing track.

         *
         * @param value : [OUT] the fileSize
         * @return errorCode
         */
        getFileSize : function(value){
        	return nutshell.usbPlayer.m_trackProperty.fileSize;
        },
<span id='nutshell-usbPlayer-method-getAspectRatio'>        /**
</span>         * Get the aspect-ratio of image.
         *
         * @param value : [OUT] the aspect-ratio (defined in enum ASPECTRATIO)
         * @return errorCode
         */
        getAspectRatio : function(value){
        	return nutshell.usbPlayer.m_videoAspectRatio;
        },

<span id='nutshell-usbPlayer-method-getDispArea'>        /**
</span>         * Get the aspectratio of image.
         *
         * @param value : [OUT] the display area value
         * @return errorCode
         */
        getDispArea : function(value){},

<span id='nutshell-usbPlayer-method-clearCache'>	/**
</span>         * Clear the data cache.
	 *
         * @param void
         * @return void
         */
        clearCache : function(){
		nutshell.usbPlayer.m_trackProperty = {};
		nutshell.usbPlayer.m_trackInfo = {};
	},
        
        ///////////////// Signal ////////////////////////////////
<span id='nutshell-usbPlayer-property-'>		/**
</span>		 *	文件开始播放（browser.reqSelectIndex, reqNext, reqPrevious), 连续给出3个消息。
		 * 		cb：trackInfoUpdateCb -&gt; trackPropertyUpdatedCb - &gt; playingStartNotify  
		 */
		
<span id='nutshell-usbPlayer-event-playingStatusUpdatedCb'>        /**
</span>         * Notify UI if the playing status successfully changed.
         * @event
         * @param {@link PLAYSTATUS} status : [IN] the playing status defined in enum PLAYSTATUS)
         * @return void
         */
        playingStatusUpdatedCb : function(status){
        	
			nutshell.usbPlayer.m_playStatus = status;      	        	
        	return true;
        },

<span id='nutshell-usbPlayer-event-FFFRSpeedUpdatedCb'>        /**
</span>         * Notify UI if the FF/FR speed successfully changed.
         * @event
         * @param speed : [IN] the playing speed (defined in enum [TO_BE_DEFINED])
         * @return void
         */
        FFFRSpeedUpdatedCb : function(playSpeed){
        	nutshell.usbPlayer.m_FFFRSpeed = speed;
        },

<span id='nutshell-usbPlayer-event-playingSpeedUpdatedCb'>        /**
</span>         * Notify UI if the playing speed successfully changed.
         * @event
         * @param speed : [IN] the playing speed (defined in enum PLAYSPEED)
         * @return void
         */
        playingSpeedUpdatedCb : function(speed){
        	nutshell.usbPlayer.m_playingSpeed = speed;
        	return true;
        },

<span id='nutshell-usbPlayer-event-playingProgressUpdatedCb'>        /**
</span>         * Notify UI the progress of current playing track.
         * @event
         * @param mstime : [IN] the progress (in millisecond)
         * @return void
         */
        playingProgressUpdatedCb : function(mstime){
        	nutshell.usbPlayer.m_playProgress = mstime;
        	return true;
        },

<span id='nutshell-usbPlayer-event-trackInfoUpdatedCb'>        /**
</span>         * Notify UI if the track info updated.
         * @note If one info is gotten(has value or null), set the right bit.
         * @event
         * @return void
         */
        trackInfoUpdatedCb : function(trackInfo){
        	nutshell.usbPlayer.m_trackInfo = trackInfo;
        	return true;
        },

<span id='nutshell-usbPlayer-event-trackPropertyUpdatedCb'>        /**
</span>         * Notify UI if the track property updated.
         * @event
         * @param {@link TrackProperty} trackProperty 
         * @return {boolean}
         */
        trackPropertyUpdatedCb : function(trackProperty){
        	nutshell.usbPlayer.m_trackProperty = trackProperty;
        	return true;
        },

<span id='nutshell-usbPlayer-event-playingStartNotifyCb'>        /**
</span>         * Notify UI if a/v file loaded successfully.
         * @event
         * @param void
         * @return void
         */
        playingStartNotifyCb : function(){
		return true;	
	},

<span id='nutshell-usbPlayer-event-playingEndNotifyCb'>        /**
</span>         * Notify UI if the EOF message is received.
         * @event
         * @param void
         * @return void
         */
        playingEndNotifyCb : function(){
		return true;	
	},

<span id='nutshell-usbPlayer-event-repeatModeUpdatedCb'>        /**
</span>         * Notify UI if the repeat-mode is updated.
         * @event
         * @param currentRepeatMode : [IN] new repeat mode
         * @return void
         */
        repeatModeUpdatedCb : function(currentRepeatMode){
        	nutshell.usbPlayer.m_repeatMode = currentRepeatMode;
        	return true;
        },

<span id='nutshell-usbPlayer-event-shuffleModeUpdatedCb'>        /**
</span>         * Notify UI if the shuffle-mode is updated.
         * @event
         * @param currentShuffleMode : [IN] new shuffle mode
         * @return void
         */
        shuffleModeUpdatedCb : function(currentShuffleMode){
        	nutshell.usbPlayer.m_shuffleMode = currentShuffleMode;
        	return true;
        },

<span id='nutshell-usbPlayer-event-audioTrackChangedCb'>        /**
</span>         * Notify UI if the audio track is changed.
         * @event
         * @param currentIndex : [IN] new track index
         * @return void
         */
        audioTrackChangedCb : function(currentIndex){
        	nutshell.usbPlayer.m_audioTrackIndex = currentIndex;
        	return true;
        },

<span id='nutshell-usbPlayer-event-subtitleTrackChangedCb'>        /**
</span>         * Notify UI if the subtitle track is changed.
         * @event
         * @param currentIndex : [IN] new track index
         * @return void
         */
        subtitleTrackChangedCb : function(currentIndex){
        	nutshell.usbPlayer.m_subtitleTrackIndex = currentIndex;
        	return true;
        },

<span id='nutshell-usbPlayer-event-dispAreaChangedCb'>        /**
</span>         * Notify UI if the display area is changed.
         * @event
         * @return void
         */
        dispAreaChangedCb : function(){},

<span id='nutshell-usbPlayer-event-aspectRatioChangedCb'>        /**
</span>         * Notify UI if the aspect-ratio is changed.
         * @note The player will start to load the next track, UI don't need to call reqNext().
         * @event
         * @param currentValue : [IN] new aspect-ratio
         * @return void
         */
        aspectRatioChangedCb : function(currentValue){
        	nutshell.usbPlayer.m_videoAspectRatio = currentValue;
        	return true;
        },

<span id='nutshell-usbPlayer-event-errorNotifyCb'>        /**
</span>         * Notify UI if error happened.
         * @event
         * @param errCode : [IN] the errorcode (defined in enum ERRORCODE)
         * @return void
         */
        errorNotifyCb : function(errCode){},
      
	    emptyFncCb : function(){}
	};

	
<span id='nutshell-usbPlayer-property-m_cbMgr'>	/**
</span>	 * 
	 */
	nutshell.usbPlayer.m_cbMgr = callbackBase.createInstance();
	
	nutshell.usbPlayer.m_cbMgr.setApi(nutshell.usbPlayer);	
})();
</pre>
</body>
</html>
